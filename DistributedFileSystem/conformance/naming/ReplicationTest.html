<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_222) on Sun Oct 20 19:39:55 AST 2019 -->
<title>ReplicationTest</title>
<meta name="date" content="2019-10-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ReplicationTest";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../conformance/naming/RegistrationTest.UnsuccessfulStorageServer.html" title="class in conformance.naming"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../conformance/naming/ReplicationTest.InvalidationStorageServer.html" title="class in conformance.naming"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?conformance/naming/ReplicationTest.html" target="_top">Frames</a></li>
<li><a href="ReplicationTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">conformance.naming</div>
<h2 title="Class ReplicationTest" class="title">Class ReplicationTest</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../test/Test.html" title="class in test">test.Test</a></li>
<li>
<ul class="inheritance">
<li><a href="../../conformance/naming/NamingTest.html" title="class in conformance.naming">conformance.naming.NamingTest</a></li>
<li>
<ul class="inheritance">
<li>conformance.naming.ReplicationTest</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ReplicationTest</span>
extends <a href="../../conformance/naming/NamingTest.html" title="class in conformance.naming">NamingTest</a></pre>
<div class="block">Tests naming server replication policy.

    <p>
    This test registers a storage server with a single file, and a second
    storage server with no files. It then accesses the file a large number of
    times. By the time all the accesses are complete, the naming server should
    have issued a command to the second server to copy the file from the first
    server. The "accesses" are performed by locking the file for shared access.

    <p>
    After testing replication in the manner described above, the test then
    locks the file for exclusive access. The file should now be deleted from
    exactly one of the two storage servers.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.InvalidationStorageServer.html" title="class in conformance.naming">ReplicationTest.InvalidationStorageServer</a></span></code>
<div class="block">Storage server expecting to be (potentially) notified that the file may
        be deleted.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.MirrorStorageServer.html" title="class in conformance.naming">ReplicationTest.MirrorStorageServer</a></span></code>
<div class="block">Storage server expecting a request to copy the file.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#ACCESS_COUNT">ACCESS_COUNT</a></span></code>
<div class="block">Number of shared access requests to make in order to cause the file to
        be replicated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../conformance/naming/ReplicationTest.InvalidationStorageServer.html" title="class in conformance.naming">ReplicationTest.InvalidationStorageServer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#hosting_server">hosting_server</a></span></code>
<div class="block">Storage server hosting the initial copy of the file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../storage/Storage.html" title="interface in storage">Storage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#hosting_stub">hosting_stub</a></span></code>
<div class="block">Stub for the storage server initially hosting the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#invalidated">invalidated</a></span></code>
<div class="block">Indicates that the file has been invalidated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../conformance/naming/ReplicationTest.MirrorStorageServer.html" title="class in conformance.naming">ReplicationTest.MirrorStorageServer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#mirror_server">mirror_server</a></span></code>
<div class="block">Storage server receiving the replicated copy of the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#notice">notice</a></span></code>
<div class="block">Test notice.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.Class[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#prerequisites">prerequisites</a></span></code>
<div class="block">Prerequisites.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../common/Path.html" title="class in common">Path</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#replicate_file">replicate_file</a></span></code>
<div class="block">File to be replicated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#replicated">replicated</a></span></code>
<div class="block">Indicates that the file has been replicated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#wake_all">wake_all</a></span></code>
<div class="block">Indicates that all waiting threads should terminate.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.conformance.naming.NamingTest">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;conformance.naming.<a href="../../conformance/naming/NamingTest.html" title="class in conformance.naming">NamingTest</a></h3>
<code><a href="../../conformance/naming/NamingTest.html#registration_stub">registration_stub</a>, <a href="../../conformance/naming/NamingTest.html#service_stub">service_stub</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#ReplicationTest--">ReplicationTest</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#clean--">clean</a></span>()</code>
<div class="block">Stops the storage servers and wakes any waiting threads.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#initialize--">initialize</a></span>()</code>
<div class="block">Starts the two storage servers.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../conformance/naming/ReplicationTest.html#perform--">perform</a></span>()</code>
<div class="block">Performs the test.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.test.Test">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;test.<a href="../../test/Test.html" title="class in test">Test</a></h3>
<code><a href="../../test/Test.html#cleanupFailure-java.lang.Throwable-">cleanupFailure</a>, <a href="../../test/Test.html#cleanupSuccess--">cleanupSuccess</a>, <a href="../../test/Test.html#failure-java.lang.Throwable-">failure</a>, <a href="../../test/Test.html#success--">success</a>, <a href="../../test/Test.html#task--">task</a>, <a href="../../test/Test.html#task-java.lang.String-">task</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="notice">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notice</h4>
<pre>public static final&nbsp;java.lang.String notice</pre>
<div class="block">Test notice.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#conformance.naming.ReplicationTest.notice">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="prerequisites">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prerequisites</h4>
<pre>public static final&nbsp;java.lang.Class[] prerequisites</pre>
<div class="block">Prerequisites.</div>
</li>
</ul>
<a name="hosting_server">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hosting_server</h4>
<pre>private&nbsp;<a href="../../conformance/naming/ReplicationTest.InvalidationStorageServer.html" title="class in conformance.naming">ReplicationTest.InvalidationStorageServer</a> hosting_server</pre>
<div class="block">Storage server hosting the initial copy of the file.</div>
</li>
</ul>
<a name="mirror_server">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mirror_server</h4>
<pre>private&nbsp;<a href="../../conformance/naming/ReplicationTest.MirrorStorageServer.html" title="class in conformance.naming">ReplicationTest.MirrorStorageServer</a> mirror_server</pre>
<div class="block">Storage server receiving the replicated copy of the file.</div>
</li>
</ul>
<a name="hosting_stub">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hosting_stub</h4>
<pre>private&nbsp;<a href="../../storage/Storage.html" title="interface in storage">Storage</a> hosting_stub</pre>
<div class="block">Stub for the storage server initially hosting the file. The other server
        ensures that the naming server commands the copy to be done from this
        server.</div>
</li>
</ul>
<a name="replicate_file">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicate_file</h4>
<pre>private final&nbsp;<a href="../../common/Path.html" title="class in common">Path</a> replicate_file</pre>
<div class="block">File to be replicated.</div>
</li>
</ul>
<a name="replicated">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicated</h4>
<pre>private&nbsp;boolean replicated</pre>
<div class="block">Indicates that the file has been replicated.</div>
</li>
</ul>
<a name="invalidated">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidated</h4>
<pre>private&nbsp;boolean invalidated</pre>
<div class="block">Indicates that the file has been invalidated.</div>
</li>
</ul>
<a name="wake_all">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wake_all</h4>
<pre>private&nbsp;boolean wake_all</pre>
<div class="block">Indicates that all waiting threads should terminate.</div>
</li>
</ul>
<a name="ACCESS_COUNT">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ACCESS_COUNT</h4>
<pre>private static final&nbsp;int ACCESS_COUNT</pre>
<div class="block">Number of shared access requests to make in order to cause the file to
        be replicated.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#conformance.naming.ReplicationTest.ACCESS_COUNT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReplicationTest--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReplicationTest</h4>
<pre>public&nbsp;ReplicationTest()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="perform--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>perform</h4>
<pre>protected&nbsp;void&nbsp;perform()
                throws <a href="../../test/TestFailed.html" title="class in test">TestFailed</a></pre>
<div class="block">Performs the test.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../test/Test.html#perform--">perform</a></code>&nbsp;in class&nbsp;<code><a href="../../test/Test.html" title="class in test">Test</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../test/TestFailed.html" title="class in test">TestFailed</a></code></dd>
</dl>
</li>
</ul>
<a name="initialize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>protected&nbsp;void&nbsp;initialize()
                   throws <a href="../../test/TestFailed.html" title="class in test">TestFailed</a></pre>
<div class="block">Starts the two storage servers.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../conformance/naming/NamingTest.html#initialize--">initialize</a></code>&nbsp;in class&nbsp;<code><a href="../../conformance/naming/NamingTest.html" title="class in conformance.naming">NamingTest</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../test/TestFailed.html" title="class in test">TestFailed</a></code> - If the naming server cannot be started, or if the
                           stubs cannot be created.</dd>
</dl>
</li>
</ul>
<a name="clean--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>clean</h4>
<pre>protected&nbsp;void&nbsp;clean()</pre>
<div class="block">Stops the storage servers and wakes any waiting threads.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../conformance/naming/NamingTest.html#clean--">clean</a></code>&nbsp;in class&nbsp;<code><a href="../../conformance/naming/NamingTest.html" title="class in conformance.naming">NamingTest</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../conformance/naming/RegistrationTest.UnsuccessfulStorageServer.html" title="class in conformance.naming"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../conformance/naming/ReplicationTest.InvalidationStorageServer.html" title="class in conformance.naming"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?conformance/naming/ReplicationTest.html" target="_top">Frames</a></li>
<li><a href="ReplicationTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
